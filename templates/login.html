<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
<link href="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/css/toastr.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/js/toastr.min.js"></script>
<!------ Include the above in your HEAD tag ---------->

<body>
    <div id="login">
        <div class="container">
            
            <div id="login-row" class="row justify-content-center align-items-center">
                <div id="login-column" class="col-md-6">
                    <div id="login-box" class="col-md-12">
                        <form id="login-form" action="" method="POST">
                            <h3 class="text-center text-info">Login</h3>
                            <label for="username" class="text-info glyphicon glyphicon-user">Username:</label><br>
                            <div class="input-group mb-3">
                                <div class="input-group-prepend">
                                    <i class="fa fa-user icon"></i>
                                  </div>
                                <input type="text" name="username" id="username" class="form-control">
                            </div>
                            <div class="form-group">
                                <label  for="password" class="text-info">Password:</label><br>
                                <div class="input-group mb-3">
                                    <div class="input-group-prepend">
                                        <i class="fa fa-lock icon"></i>
                                    </div>
                                    <input  type="password" name="password" id="password" class="form-control">
                                </div>
                                <i class="fa fa-eye icon" onclick="myFunction()" id="eye"></i>
                                
                                <div class="text-right">
                                    <input class="form-check-input up" type="checkbox" id="autoSizingCheck" checked="checked" disabled>
                                    
                                        <label class="form-check-label up" for="autoSizingCheck" >
                                        Remember me(off)
                                        </label>
                                </div>
                            </div>
                        </form>
                        <div class="text-right">
                            <a href="/register" class="btn btn-outline-info" id="reg">Register here</a>
                        </div>
                        <input type="submit" name="submit" class="btn btn-info btn-md" id="button-id" value="submit">
                    </div>
                </div>
            </div>
            
        </div>
    </div>
    
</body>
<style>
body {
  margin: 0;
  padding: 0;
  background-color: #17a2b8;
  height: 100vh;
}
#login .container #login-row #login-column #login-box {
  margin-top: 120px;
  max-width: 600px;
  height: 370px;
  border: 1px solid #9C9C9C;
  background-color: #EAEAEA;
}
#button-id{
    margin-top: -37px;
    padding-bottom: 2%;
}

.up{
    margin-top: -30px;
}

#autoSizingCheck{
    height: 25px;
}
.icon {
  padding: 10px;
  background: #00a9ff;
  color: white;
  min-width: 50px;
  text-align: center;
}
.fa-lock{
    width: 1px;
}


</style>
<script>
toastr.options = {
  "closeButton": true,
  "debug": false,
  "newestOnTop": true,
  "progressBar": true,
  "positionClass": "toast-top-right",
  "preventDuplicates": false,
  "showDuration": "300",
  "hideDuration": "1000",
  "timeOut": "5000",
  "extendedTimeOut": "1000",
  "showEasing": "swing",
  "hideEasing": "linear",
  "showMethod": "fadeIn",
  "hideMethod": "fadeOut"
}
function myFunction() {
  var x = document.getElementById("password");
  if(document.getElementById("eye").className == "fa fa-eye-slash icon"){
    document.getElementById("eye").className = "fa fa-eye icon";
  }
  else{
    document.getElementById("eye").className = "fa fa-eye-slash icon";
  }
  if (x.type === "password") {
    x.type = "text";
  } else {
    x.type = "password";
  }
}
    $(document).ready(function(){
        $("#button-id").click(function(){
            var data = $("form").serialize();
            if ($('#autoSizingCheck').is(':checked')){
                data = data + "&CheckBox=" + "True" // maybe change in the future(that's why I have the +), option is disabled for now
            }
            else{
                data = data + "&CheckBox=" + "True" // maybe change in the future(that's why I have the +), option is disabled for now
            }
            console.log(data);
            $.ajax({
                type: "POST",
                url: 'login',
                data: data,
                success: function(res){
                    console.log(res)
                    if(res=="username"){
                        
                        toastr["error"]("This username is not in my database. Perhaps your mail toekn has ended and someone else took it.", "This username doesn't exist")
                        
                    } 
                    else if(res=="password"){
                        
                        toastr["error"]("Not the right password. Please try again.", "Wrong password")
                        
                    }
                    else{
                        if(res =="email"){
                            toastr["error"]("Check your primary mail box or junk. You will have to verify your email before you login. If the token has ended, you'll need to sign up again.", "Please verify your email")
                            
                        }
                        else if(res=="Great"){
                            $("#pass-wrong").html("great");
                            $("#user-wrong").html("great");
                            toastr["success"]("Login you in!", "Success!")
                            $(location).attr("href", "http://admin-monitor.herokuapp.com/")
                        }
                        else{
                            console.log("Else")
                            window.location = "http://admin-monitor.herokuapp.com/check-2fa?id=" + res;
                        }
                    }
                }
            });
        });
    });
</script>